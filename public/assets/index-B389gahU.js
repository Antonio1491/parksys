import{a4 as R,l as D,az as S,u as T,ar as g,j as e,L as t,B as h,ce as u,bv as q,f as l,i as n,a6 as E,V as P,q as c,g as L,h as G,e as p,ad as Q,bH as $,bI as B,bJ as f,bK as a,bL as I,bM as i,U as v,bP as U,bQ as k,eQ as H,bR as K,bS as d,an as w,bC as V,c$ as F,bV as z,b as Z,Z as J,a5 as O}from"./index-BKCBrrzQ.js";import{D as W}from"./DynamicAdminLayout-Cp1xOGqD.js";import{C as X}from"./copy-DvrjR0MU.js";import{C as Y,G as _}from"./gem-CBJekrsN.js";import"./RoleBadge-DcdBd9gq.js";const ee=[{id:"super-admin",name:"super-admin",displayName:"Super Administrador",description:"Control total del sistema para la gestión de parques y usuarios",level:10,userCount:2,permissions:147,isActive:!0,createdAt:"2024-01-15",lastModified:"2024-08-01",badge:{color:"bg-red-500",textColor:"text-white",icon:e.jsx(Y,{className:"w-3 h-3"})}},{id:"director-general",name:"director-general",displayName:"Director General",description:"Visión estratégica y supervisión de operaciones",level:9,userCount:1,permissions:89,isActive:!0,createdAt:"2024-01-15",lastModified:"2024-07-28",badge:{color:"bg-purple-500",textColor:"text-white",icon:e.jsx(Z,{className:"w-3 h-3"})}},{id:"coordinador-parques",name:"coordinador-parques",displayName:"Coordinador de Parques",description:"Gestión integral de parques y espacios verdes",level:8,userCount:5,permissions:65,isActive:!0,createdAt:"2024-01-20",lastModified:"2024-08-03",badge:{color:"bg-green-500",textColor:"text-white",icon:e.jsx(_,{className:"w-3 h-3"})}},{id:"coordinador-actividades",name:"coordinador-actividades",displayName:"Coordinador de Actividades",description:"Gestión de actividades, eventos e instructores",level:7,userCount:3,permissions:58,isActive:!0,createdAt:"2024-01-25",lastModified:"2024-07-30",badge:{color:"bg-blue-500",textColor:"text-white",icon:e.jsx(J,{className:"w-3 h-3"})}},{id:"operador-parque",name:"operador-parque",displayName:"Operador de Parque",description:"Personal de campo para operaciones diarias",level:4,userCount:15,permissions:32,isActive:!0,createdAt:"2024-02-01",lastModified:"2024-08-02",badge:{color:"bg-orange-500",textColor:"text-white",icon:e.jsx(O,{className:"w-3 h-3"})}},{id:"admin-financiero",name:"admin-financiero",displayName:"Administrador Financiero",description:"Gestión económica y contable",level:6,userCount:2,permissions:45,isActive:!0,createdAt:"2024-02-05",lastModified:"2024-07-25",badge:{color:"bg-yellow-500",textColor:"text-white",icon:e.jsx(p,{className:"w-3 h-3"})}},{id:"consultor-auditor",name:"consultor-auditor",displayName:"Consultor/Auditor",description:"Acceso de solo lectura para análisis",level:1,userCount:4,permissions:28,isActive:!0,createdAt:"2024-02-10",lastModified:"2024-07-20",badge:{color:"bg-gray-500",textColor:"text-white",icon:e.jsx(w,{className:"w-3 h-3"})}}];function ne(){const[m,y]=R.useState(""),{toast:x}=D(),j=S(),{data:o=ee,isLoading:se}=T({queryKey:["/api/admin-roles/roles"],enabled:!1}),b=g({mutationFn:async s=>{if(await new Promise(r=>setTimeout(r,1e3)),s==="super-admin")throw new Error("No se puede eliminar el rol Super Administrador")},onSuccess:()=>{j.invalidateQueries({queryKey:["/api/admin-roles/roles"]}),x({title:"Rol eliminado",description:"El rol se ha eliminado correctamente."})},onError:s=>{x({title:"Error al eliminar",description:s.message,variant:"destructive"})}}),C=g({mutationFn:async s=>(await new Promise(r=>setTimeout(r,800)),{success:!0}),onSuccess:()=>{j.invalidateQueries({queryKey:["/api/admin-roles/roles"]}),x({title:"Rol duplicado",description:"El rol se ha duplicado correctamente."})}}),N=o.filter(s=>s.name.toLowerCase().includes(m.toLowerCase())||s.description.toLowerCase().includes(m.toLowerCase())),A=(s,r)=>{window.confirm(`¿Estás seguro de que deseas eliminar el rol "${r}"?`)&&b.mutate(s)},M=s=>{C.mutate(s)};return e.jsx(W,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Roles"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Administrar roles del sistema y sus permisos"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(t,{href:"/admin-roles/roles/templates",children:e.jsxs(h,{variant:"outline",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Plantillas"]})}),e.jsx(t,{href:"/admin-roles/roles/create",children:e.jsxs(h,{children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Crear Rol"]})})]})]}),e.jsx(l,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(P,{placeholder:"Buscar roles por nombre o descripción...",value:m,onChange:s=>y(s.target.value),className:"pl-10"})]}),e.jsxs(c,{variant:"outline",className:"px-3 py-1",children:[N.length," roles encontrados"]})]})})}),e.jsxs(l,{children:[e.jsxs(L,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"Roles del Sistema"]}),e.jsx(Q,{children:"Lista completa de roles con información de usuarios y permisos"})]}),e.jsx(n,{children:e.jsxs($,{children:[e.jsx(B,{children:e.jsxs(f,{children:[e.jsx(a,{children:"Rol"}),e.jsx(a,{children:"Descripción"}),e.jsx(a,{children:"Nivel"}),e.jsx(a,{children:"Usuarios"}),e.jsx(a,{children:"Permisos"}),e.jsx(a,{children:"Estado"}),e.jsx(a,{children:"Última Modificación"}),e.jsx(a,{className:"text-right",children:"Acciones"})]})}),e.jsx(I,{children:N.map(s=>e.jsxs(f,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`inline-flex items-center justify-center rounded text-white w-8 h-8 ${s.badge.color}`,children:s.badge.icon}),e.jsx("div",{children:e.jsx("p",{className:"font-medium text-gray-900",children:s.name.toUpperCase()})})]})}),e.jsx(i,{children:e.jsx("p",{className:"text-sm text-gray-600 max-w-xs",children:s.description})}),e.jsx(i,{children:e.jsxs(c,{variant:"outline",className:"font-mono",children:["Nivel ",s.level]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:s.userCount})]})}),e.jsx(i,{children:e.jsxs(c,{variant:"secondary",children:[s.permissions," permisos"]})}),e.jsx(i,{children:e.jsx(c,{variant:s.isActive?"default":"secondary",children:s.isActive?"Activo":"Inactivo"})}),e.jsx(i,{children:e.jsx("span",{className:"text-sm text-gray-600",children:new Date(s.lastModified).toLocaleDateString("es-ES")})}),e.jsx(i,{className:"text-right",children:e.jsxs(U,{children:[e.jsx(k,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"sm",children:e.jsx(H,{className:"h-4 w-4"})})}),e.jsxs(K,{align:"end",children:[e.jsx(t,{href:`/admin-roles/roles/${s.id}`,children:e.jsxs(d,{children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Ver Detalles"]})}),e.jsx(t,{href:`/admin-roles/roles/${s.id}/edit`,children:e.jsxs(d,{children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Editar"]})}),e.jsx(t,{href:`/admin-roles/roles/${s.id}/permissions`,children:e.jsxs(d,{children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Permisos"]})}),e.jsxs(d,{onClick:()=>M(s.id),children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Duplicar"]}),e.jsx(F,{}),e.jsxs(d,{onClick:()=>A(s.id,s.name),className:"text-red-600",disabled:s.id==="super-admin",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Eliminar"]})]})]})})]},s.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(l,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Roles"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:o.length})]}),e.jsx(p,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(l,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Usuarios con Roles"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:o.reduce((s,r)=>s+r.userCount,0)})]}),e.jsx(v,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(l,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Permisos Totales"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Math.max(...o.map(s=>s.permissions))})]}),e.jsx(u,{className:"h-8 w-8 text-purple-500"})]})})})]})]})})}export{ne as default};
