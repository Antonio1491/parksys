import{a4 as R,u as p,j as e,ag as v,B as h,f as i,g as c,w as f,M as E,p as P,i as n,q as j,h as d,b as g,k as I,L as y,A as b,U as A,r as D,P as k,n as S,y as M,z as F,I as L,J as q,K as z,N as $,ae as K,af as U,a5 as B,ah as w,ai as C,v as T,a3 as V}from"./index-BKCBrrzQ.js";const m=({rating:a,size:t="w-4 h-4"})=>e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(s=>e.jsx(g,{className:`${t} ${s<=a?"text-yellow-400 fill-current":"text-gray-300"}`},s))}),H=({evaluation:a})=>{const t=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"});return e.jsxs(i,{className:"mb-4",children:[e.jsx(c,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(f,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:a.evaluatorName}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.evaluatorCity&&e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-3 h-3"}),e.jsx("span",{children:a.evaluatorCity})]}),e.jsx(P,{className:"w-3 h-3 ml-2"}),e.jsx("span",{children:t(a.createdAt)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{rating:a.overallRating}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[a.overallRating,"/5"]})]})]})}),e.jsxs(n,{children:[a.attendedActivity&&e.jsx("div",{className:"mb-3",children:e.jsx(j,{variant:"outline",className:"text-xs",children:a.attendedActivity})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-600",children:"Conocimiento"}),e.jsx(m,{rating:a.knowledgeRating,size:"w-3 h-3"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-600",children:"Paciencia"}),e.jsx(m,{rating:a.patienceRating,size:"w-3 h-3"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-600",children:"Claridad"}),e.jsx(m,{rating:a.clarityRating,size:"w-3 h-3"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-600",children:"Puntualidad"}),e.jsx(m,{rating:a.punctualityRating,size:"w-3 h-3"})]})]}),a.comments&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(v,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:['"',a.comments,'"']})]})}),a.wouldRecommend!==void 0&&e.jsx("div",{className:"flex items-center justify-end",children:e.jsx(j,{variant:a.wouldRecommend?"default":"secondary",className:a.wouldRecommend?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600",children:a.wouldRecommend?"✓ Recomendado":"✗ No recomendado"})})]})]})},G=({stats:a})=>e.jsxs(i,{className:"mb-6",children:[e.jsx(c,{children:e.jsx(d,{className:"text-lg text-gray-900",children:"Resumen de Evaluaciones"})}),e.jsxs(n,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.totalEvaluations}),e.jsx("div",{className:"text-sm text-gray-600",children:"Evaluaciones"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"text-2xl font-bold text-yellow-600",children:a.averageRating.toFixed(1)}),e.jsx(g,{className:"w-5 h-5 text-yellow-400 fill-current"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Promedio"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[a.recommendationRate,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Recomendación"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.recommendCount}),e.jsx("div",{className:"text-sm text-gray-600",children:"Recomiendan"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Promedio por categoría"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Conocimiento"}),e.jsx("span",{className:"font-medium",children:a.averageKnowledge.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Paciencia"}),e.jsx("span",{className:"font-medium",children:a.averagePatience.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Claridad"}),e.jsx("span",{className:"font-medium",children:a.averageClarity.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Puntualidad"}),e.jsx("span",{className:"font-medium",children:a.averagePunctuality.toFixed(1)})]})]})]})]})]});function J({instructorId:a}){const[t,s]=R.useState(!1),{data:x}=p({queryKey:[`/api/public/instructors/${a}/evaluation-stats`]}),{data:l,isLoading:N}=p({queryKey:[`/api/public/instructors/${a}/evaluations`]});if(N)return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-32 bg-gray-100 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-48 bg-gray-100 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-48 bg-gray-100 rounded-lg animate-pulse"})]});if(!l||l.length===0)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Sin evaluaciones públicas"}),e.jsx("p",{className:"text-gray-600",children:"Este instructor aún no tiene evaluaciones aprobadas de ciudadanos."})]});const o=t?l:l.slice(0,3);return e.jsxs("div",{className:"space-y-6",children:[x&&e.jsx(G,{stats:x}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Evaluaciones de Ciudadanos (",l.length,")"]}),e.jsx("div",{className:"space-y-4",children:o.map(r=>e.jsx(H,{evaluation:r},r.id))}),l.length>3&&e.jsx("div",{className:"text-center mt-6",children:e.jsx(h,{variant:"outline",onClick:()=>s(!t),className:"text-green-600 border-green-200 hover:bg-green-50",children:t?"Mostrar menos evaluaciones":`Ver todas las evaluaciones (${l.length})`})})]})]})}function Y(){const{id:a}=I(),t=parseInt(a||"0"),{data:s,isLoading:x,error:l}=p({queryKey:[`/api/instructors/${t}`],enabled:!!t&&t>0});if(x)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-green-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Cargando perfil del instructor..."})]})});if(l||!s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-600 mb-4",children:e.jsx(f,{className:"h-16 w-16 mx-auto"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Instructor no encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"No pudimos encontrar la información de este instructor."}),e.jsx(y,{href:"/instructors",children:e.jsxs(h,{children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Volver a instructores"]})})]})});const N=r=>T(new Date(r),"d 'de' MMMM 'de' yyyy",{locale:V}),o=s.specialties?Array.isArray(s.specialties)?s.specialties:s.specialties.split(",").map(r=>r.trim()):[];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[e.jsx(y,{href:"/instructors",children:e.jsxs(h,{variant:"ghost",className:"mb-2",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Volver a instructores"]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[s.profileImageUrl?e.jsx("img",{src:s.profileImageUrl,alt:s.fullName,className:"w-16 h-16 rounded-full object-cover"}):e.jsx("div",{className:"w-16 h-16 bg-purple-200 rounded-full flex items-center justify-center",children:e.jsx(A,{className:"h-8 w-8 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.fullName}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[s.preferredParkName&&e.jsxs("p",{className:"text-gray-600 flex items-center",children:[e.jsx(E,{className:"h-4 w-4 mr-1"}),s.preferredParkName]}),s.averageRating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsxs("span",{className:"text-gray-700 font-medium",children:[s.averageRating,"/5"]})]})]})]})]})]})}),e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5 text-purple-600"}),"Información del Instructor"]})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Experiencia"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[s.experienceYears," años"]})]}),o.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Especialidades"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:o.map((r,u)=>e.jsx(j,{className:"bg-purple-100 text-purple-800",children:r},u))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Estado"}),e.jsx(j,{className:s.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:s.status==="active"?"Activo":"Inactivo"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Contacto"}),s.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:s.phone})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Instructor desde"}),e.jsxs("p",{className:"text-gray-700 flex items-center gap-1",children:[e.jsx(S,{className:"h-4 w-4"}),N(s.createdAt)]})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs(M,{children:[e.jsx(F,{asChild:!0,children:e.jsxs(h,{className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Evaluar Instructor"]})}),e.jsxs(L,{className:"max-w-2xl max-h-[90vh] overflow-y-auto","aria-describedby":"evaluation-description",children:[e.jsxs(q,{children:[e.jsxs(z,{children:["Evaluar a ",s.fullName]}),e.jsx($,{id:"evaluation-description",children:"Comparte tu experiencia para ayudar a otros visitantes."})]}),e.jsx(K,{instructorId:s.id,instructorName:s.fullName,onSuccess:()=>{}})]})]})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(U,{spaceId:"13",position:"card",pageType:"instructor-profile"})})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[s.bio&&e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-purple-600"}),"Acerca del Instructor"]})}),e.jsx(n,{children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.bio})})]}),s.certifications&&s.certifications.length>0&&e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5 text-blue-600"}),"Certificaciones"]})}),e.jsx(n,{children:e.jsx("div",{className:"space-y-3",children:s.certifications.map((r,u)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500",children:[e.jsx(w,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700",children:r})]},u))})})]}),s.qualifications&&e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 text-green-600"}),"Experiencia Profesional"]})}),e.jsx(n,{children:e.jsx("div",{className:"p-4 bg-green-50 rounded-lg border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.qualifications})]})})})]}),e.jsxs(i,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-yellow-500"}),"Evaluaciones de Visitantes"]})}),e.jsx(n,{children:e.jsx(J,{instructorId:s.id})})]})]})]})})]})}export{Y as default};
