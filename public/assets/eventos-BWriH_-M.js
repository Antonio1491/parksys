import{c as S,a4 as f,l as E,az as A,u as R,j as e,bh as y,f as r,i as l,cb as P,b as T,U as q,p as m,al as o,bO as h,a6 as F,V as M,B as d,a9 as $,bv as B,q as D,an as I,bC as H}from"./index-BKCBrrzQ.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=S("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),O=()=>{const[n,b]=f.useState(""),[x,w]=f.useState("all");E(),A();const{data:t=[],isLoading:C}=R({queryKey:["/api/evaluations/events"]}),j=t.filter(s=>{var p,g,N,u;const a=((p=s.eventName)==null?void 0:p.toLowerCase().includes(n.toLowerCase()))||((g=s.evaluatorName)==null?void 0:g.toLowerCase().includes(n.toLowerCase()))||((N=s.eventType)==null?void 0:N.toLowerCase().includes(n.toLowerCase()))||((u=s.parkName)==null?void 0:u.toLowerCase().includes(n.toLowerCase())),z=x==="all"||s.status===x;return a&&z}),k=s=>{switch(s){case"approved":return e.jsx(o,{className:"h-4 w-4 text-green-500"});case"rejected":return e.jsx(h,{className:"h-4 w-4 text-red-500"});default:return e.jsx(m,{className:"h-4 w-4 text-yellow-500"})}},L=s=>{switch(s){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}},i=s=>s>=4.5?"text-green-600":s>=3.5?"text-blue-600":s>=2.5?"text-yellow-600":"text-red-600",c={total:t.length,pending:t.filter(s=>s.status==="pending").length,approved:t.filter(s=>s.status==="approved").length,rejected:t.filter(s=>s.status==="rejected").length,averageRating:t.length>0?t.reduce((s,a)=>s+a.overallRating,0)/t.length:0,totalAttendees:t.reduce((s,a)=>s+(a.attendees||0),0),totalHours:t.reduce((s,a)=>s+(a.duration||0),0)};return C?e.jsx(y,{title:"Evaluaciones de Eventos",subtitle:"Cargando evaluaciones de eventos...",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((s,a)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},a))})]})})}):e.jsx(y,{title:"Evaluaciones de Eventos",subtitle:"Gestión y seguimiento de evaluaciones de eventos",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-7 gap-4 mb-6",children:[e.jsx(r,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:c.total})]}),e.jsx(P,{className:"h-8 w-8 text-red-500"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Promedio"}),e.jsxs("p",{className:`text-2xl font-bold ${i(c.averageRating)}`,children:[c.averageRating.toFixed(1)," ⭐"]})]}),e.jsx(T,{className:"h-8 w-8 text-yellow-500"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Asistentes"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:c.totalAttendees})]}),e.jsx(q,{className:"h-8 w-8 text-indigo-500"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Duración Total"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[c.totalHours,"h"]})]}),e.jsx(m,{className:"h-8 w-8 text-purple-500"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:c.pending})]}),e.jsx(m,{className:"h-8 w-8 text-yellow-500"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Aprobadas"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.approved})]}),e.jsx(o,{className:"h-8 w-8 text-green-500"})]})})}),e.jsx(r,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rechazadas"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:c.rejected})]}),e.jsx(h,{className:"h-8 w-8 text-red-500"})]})})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(M,{placeholder:"Buscar por evento, tipo o parque...",value:n,onChange:s=>b(s.target.value),className:"pl-10"})]}),e.jsxs("select",{value:x,onChange:s=>w(s.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:[e.jsx("option",{value:"all",children:"Todos los estados"}),e.jsx("option",{value:"pending",children:"Pendientes"}),e.jsx("option",{value:"approved",children:"Aprobadas"}),e.jsx("option",{value:"rejected",children:"Rechazadas"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"}),"Filtros Avanzados"]}),e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Nueva Evaluación"]})]})]}),e.jsx("div",{className:"grid gap-4",children:j.length===0?e.jsx(r,{children:e.jsxs(l,{className:"p-8 text-center",children:[e.jsx(v,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No se encontraron evaluaciones de eventos"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:n||x!=="all"?"Intenta ajustar los filtros de búsqueda":"Las evaluaciones aparecerán aquí una vez que se registren"})]})}):j.map(s=>e.jsx(r,{className:"hover:shadow-md transition-shadow",children:e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(v,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.eventName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Tipo: ",s.eventType]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Parque: ",s.parkName]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Evaluado por: ",s.evaluatorName]}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Asistentes: ",s.attendees||0]}),e.jsxs("span",{children:["Duración: ",s.duration||0,"h"]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.createdAt).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-lg font-bold ${i(s.overallRating)}`,children:[(s.overallRating||0).toFixed(1)," ⭐"]}),e.jsx(D,{className:L(s.status),children:s.status==="pending"?"Pendiente":s.status==="approved"?"Aprobada":"Rechazada"})]}),k(s.status)]})]}),s.criteria&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Organización"}),e.jsxs("p",{className:`font-semibold ${i(s.criteria.organization||0)}`,children:[s.criteria.organization||0,"/5"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Logística"}),e.jsxs("p",{className:`font-semibold ${i(s.criteria.logistics||0)}`,children:[s.criteria.logistics||0,"/5"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Satisfacción"}),e.jsxs("p",{className:`font-semibold ${i(s.criteria.satisfaction||0)}`,children:[s.criteria.satisfaction||0,"/5"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Impacto"}),e.jsxs("p",{className:`font-semibold ${i(s.criteria.impact||0)}`,children:[s.criteria.impact||0,"/5"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Seguridad"}),e.jsxs("p",{className:`font-semibold ${i(s.criteria.safety||0)}`,children:[s.criteria.safety||0,"/5"]})]})]}),s.comments&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Comentarios:"})," ",s.comments]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Ver Detalles"]}),e.jsxs(d,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"Editar"]}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{size:"sm",className:"bg-green-600 hover:bg-green-700 flex items-center gap-2",children:[e.jsx(o,{className:"h-4 w-4"}),"Aprobar"]}),e.jsxs(d,{variant:"destructive",size:"sm",className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),"Rechazar"]})]})]})]})},s.id))})]})})};export{O as default};
