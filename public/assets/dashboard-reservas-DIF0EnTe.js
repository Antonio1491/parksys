import{aH as R,a4 as _,u as f,j as e,bh as N,bi as E,W as L,Y as S,_ as T,$ as F,a0 as d,B as n,d8 as x,f as t,g as r,h as l,i,n as v,ak as V,bj as q,ad as m,an as y,q as M,ej as $,M as D}from"./index-BKCBrrzQ.js";const A={pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"},P={pending:"Pendiente",confirmed:"Confirmada",cancelled:"Cancelada",completed:"Completada"};function X(){var u;const[B,c]=R(),[o,b]=_.useState("month"),{data:a,isLoading:w}=f({queryKey:["/api/space-reservations/dashboard-stats",o],queryFn:async()=>{const s=await fetch(`/api/space-reservations/dashboard-stats?period=${o}`);if(!s.ok)throw new Error("Error al cargar las estadísticas del dashboard");return s.json()}}),{data:h=[],isLoading:C}=f({queryKey:["/api/space-reservations/recent",10],queryFn:async()=>{const s=await fetch("/api/space-reservations/recent?limit=10");if(!s.ok)throw new Error("Error al cargar las reservas recientes");return s.json()}});if(w||C)return e.jsx(N,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})});const j=()=>{c("/admin/space-reservations")},p=()=>{c("/admin/space-reservations/new")},k=s=>{c(`/admin/space-reservations/edit/${s}`)};return e.jsx(N,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"py-8 px-4 -mx-4 -mt-6 flex justify-between items-start",style:{backgroundColor:"#14b8a6"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"w-8 h-8 text-white"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white font-poppins",children:"Dashboard de Reservas"}),e.jsx("p",{className:"text-base font-normal text-white font-poppins mt-1",children:"Análisis y métricas de reservas de espacios en parques"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(L,{value:o,onValueChange:b,children:[e.jsx(S,{className:"w-40 bg-white text-gray-900",children:e.jsx(T,{})}),e.jsxs(F,{children:[e.jsx(d,{value:"week",children:"Esta semana"}),e.jsx(d,{value:"month",children:"Este mes"}),e.jsx(d,{value:"quarter",children:"Este trimestre"}),e.jsx(d,{value:"year",children:"Este año"})]})]}),e.jsxs(n,{onClick:p,className:"bg-white text-gray-900 hover:bg-gray-100",children:[e.jsx(x,{className:"h-4 w-4 mr-2"}),"Nueva Reserva"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Total Reservas"}),e.jsx(x,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(a==null?void 0:a.total_reservations)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Todas las reservas registradas"})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Confirmadas"}),e.jsx(v,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(a==null?void 0:a.confirmed)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Reservas activas confirmadas"})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Ingresos Total"}),e.jsx(V,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",parseFloat((a==null?void 0:a.total_revenue)||"0").toLocaleString("es-MX")]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ingresos totales generados"})]})]}),e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Valor Promedio"}),e.jsx(q,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["$",parseFloat((a==null?void 0:a.avg_booking_value)||"0").toLocaleString("es-MX")]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Por reserva confirmada"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsx(r,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Reservas Recientes"}),e.jsx(m,{children:"Últimas reservas realizadas en el sistema"})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:j,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Ver Todas"]})]})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[h.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition-colors",onClick:()=>k(s.id),children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:s.customer_name}),e.jsx(M,{className:A[s.status],children:P[s.status]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[s.space_name," - ",s.park_name]}),e.jsx("p",{className:"text-xs text-gray-500",children:$(s.reservation_date)})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-bold text-green-600",children:["$",parseFloat(s.total_cost).toLocaleString("es-MX")]})})]},s.id)),h.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(x,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),e.jsx("p",{children:"No hay reservas recientes"})]})]})})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(l,{children:"Espacios Más Solicitados"}),e.jsx(m,{children:"Espacios con mayor número de reservas"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:((u=a==null?void 0:a.popular_spaces)==null?void 0:u.slice(0,5).map((s,g)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full font-bold text-sm",children:g+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.space_name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.park_name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-blue-600",children:s.booking_count}),e.jsx("p",{className:"text-xs text-gray-500",children:"reservas"})]})]},g)))||e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(D,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),e.jsx("p",{children:"No hay datos de espacios populares"})]})})})]})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(l,{children:"Acciones Rápidas"}),e.jsx(m,{children:"Funciones principales para la gestión de reservas"})]}),e.jsx(i,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(n,{onClick:j,variant:"outline",className:"justify-start h-auto p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Ver Todas las Reservas"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Lista completa y filtros"})]})]})}),e.jsx(n,{onClick:p,variant:"outline",className:"justify-start h-auto p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:"h-6 w-6 text-green-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Nueva Reserva"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Crear reserva manual"})]})]})}),e.jsx(n,{onClick:()=>c("/admin/space-reservations/calendar"),variant:"outline",className:"justify-start h-auto p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"h-6 w-6 text-purple-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Vista Calendario"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Cronograma visual"})]})]})})]})})]})]})})}export{X as default};
