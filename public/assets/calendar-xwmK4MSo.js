import{a4 as n,u as T,aU as G,aV as K,aW as J,j as e,n as M,m as _,T as ue,ao as H,W as g,Y as u,_ as j,$ as y,a0 as i,B as d,X as je,aX as ye,v as A,aY as Ne,aZ as W,P as fe,r as X,M as Y,y as ve,I as be,J as we,aj as Ce,K as De,q as F,p as Se,U as ke,w as Q,a_ as Te,a3 as Z}from"./index-BKCBrrzQ.js";import{P as Me}from"./PublicLayout-Cks6Enyp.js";import{g as ee}from"./getDay-ARZLhrUe.js";import{e as Ae}from"./eachDayOfInterval-Cr2SSxG5.js";import{p as h}from"./parseISO-CSdqc1uo.js";import{s as Fe}from"./subMonths-CWHOHbgb.js";const Pe="/jardin-japones.jpg",Le=()=>{const[o,P]=n.useState(new Date);n.useState(null);const[a,se]=n.useState(null),[ae,N]=n.useState(!1),[m,I]=n.useState("all"),[f,v]=n.useState("all"),[b,q]=n.useState("all"),[w,$]=n.useState("all"),{data:x=[],isLoading:te}=T({queryKey:["/api/activities"]}),{data:C=[],isLoading:re}=T({queryKey:["/api/events"]}),{data:z=[]}=T({queryKey:["/api/activity-categories"]}),ie=C.filter(s=>s.status==="published").map(s=>{var t,r;return{id:s.id,title:s.title,description:s.description,category:s.eventType,startDate:s.startDate,endDate:s.endDate,startTime:s.startTime,endTime:s.endTime,location:s.location,capacity:s.capacity,price:void 0,parkName:((r=(t=s.parks)==null?void 0:t[0])==null?void 0:r.name)||"Sin parque",type:"event",isFree:s.registrationType==="free",organizerName:s.organizerName,targetAudience:s.targetAudience,status:s.status}}),E=[...x.map(s=>{var r,l;const t=s.categoryId?((r=z.find(p=>p.id===s.categoryId))==null?void 0:r.name)||"Sin categoría":s.category||"Sin categoría";return{id:s.id,title:s.title,description:s.description,category:t,startDate:s.startDate,endDate:s.endDate,startTime:s.startTime,endTime:s.endTime,location:s.location,capacity:s.capacity,price:s.price,parkName:s.parkName,type:"activity",isFree:s.isFree,instructorName:s.instructorName,targetAudience:((l=s.targetMarket)==null?void 0:l.join(", "))||""}}),...ie],O=z.map(s=>s.name),V=Array.from(new Set(C.map(s=>s.eventType||"Sin categoría"))),le=Array.from(new Set([...x.map(s=>s.parkName||"Sin parque"),...C.flatMap(s=>{var t;return((t=s.parks)==null?void 0:t.map(r=>r.name))||["Sin parque"]})])),L=()=>m==="activities"?O:m==="events"?V:Array.from(new Set([...O,...V])),D=(s,t)=>{const r={Deportivo:"bg-blue-500","Arte y Cultura":"bg-purple-500","Naturaleza y Ciencia":"bg-green-500","Recreación y Bienestar":"bg-orange-500",Comunidad:"bg-indigo-500","Eventos de Temporada":"bg-pink-500"},l={Deportivos:"bg-cyan-500",Culturales:"bg-violet-500",Ambientales:"bg-emerald-500",Sociales:"bg-amber-500",Educativos:"bg-blue-600",Benéficos:"bg-rose-500",Celebraciones:"bg-yellow-500",default:"bg-gray-500"};return t==="activity"?r[s]||"bg-teal-500":l[s]||l.default},R=E.filter(s=>!(m==="activities"&&s.type!=="activity"||m==="events"&&s.type!=="event"||f!=="all"&&s.category!==f||b!=="all"&&s.parkName!==b||w==="free"&&!s.isFree||w==="paid"&&s.isFree)),ne=s=>R.filter(t=>{if(!t.startDate||!J(h(t.startDate)))return!1;const r=h(t.startDate);return W(s,r)}),ce=()=>{P(s=>Fe(s,1))},oe=()=>{P(s=>Te(s,1))},de=s=>{se(s),N(!0)},me=()=>{I("all"),v("all"),q("all"),$("all")},B=G(o),U=K(o),S=new Date(B);S.setDate(S.getDate()-ee(B));const k=new Date(U);k.setDate(k.getDate()+(6-ee(U)));const xe=Ae({start:S,end:k});x.length;const he=new Set(x.map(s=>s.parkName)).size,pe=x.filter(s=>{if(!s.startDate||!J(h(s.startDate)))return!1;const t=h(s.startDate);return t>=G(o)&&t<=K(o)}).length;return te||re?e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando calendario..."})]})})}):e.jsx(Me,{children:e.jsxs("div",{className:"bg-gray-50",children:[e.jsxs("section",{className:"relative text-white",style:{backgroundImage:`url(${Pe})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"absolute inset-0 bg-black/50"}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-4xl md:text-6xl mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(M,{className:"h-12 w-12 md:h-16 md:w-16 text-white"}),e.jsx("span",{className:"font-light text-white",style:{fontFamily:"Guttery, sans-serif"},children:"Nuestro"})]}),e.jsx("span",{className:"font-bold text-white",children:"Calendario de Actividades"})]}),e.jsx("p",{className:"text-xl md:text-2xl text-blue-100 max-w-3xl mx-auto",children:"Descubre eventos y actividades programadas en todos nuestros parques durante el mes"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-blue-100 mt-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5"}),e.jsxs("span",{children:[pe," actividades este mes"]})]}),e.jsx(_,{orientation:"vertical",className:"h-6 bg-blue-300"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),e.jsxs("span",{children:[he," parques activos"]})]}),e.jsx(_,{orientation:"vertical",className:"h-6 bg-blue-300"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),e.jsxs("span",{children:[L().length," categorías"]})]})]})]})]}),e.jsx("section",{className:"py-6",style:{backgroundColor:"#19633c"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"rounded-2xl shadow-sm p-6",style:{backgroundColor:"#19633c"},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(g,{value:m,onValueChange:s=>{I(s),v("all")},children:[e.jsx(u,{className:"border-gray-200 focus:border-primary focus:ring-primary",children:e.jsx(j,{placeholder:"Tipo"})}),e.jsxs(y,{children:[e.jsx(i,{value:"all",children:"Actividades y Eventos"}),e.jsx(i,{value:"activities",children:"Solo Actividades"}),e.jsx(i,{value:"events",children:"Solo Eventos"})]})]}),e.jsxs(g,{value:f,onValueChange:v,children:[e.jsx(u,{className:"border-gray-200 focus:border-primary focus:ring-primary",children:e.jsx(j,{placeholder:"Categoría"})}),e.jsxs(y,{children:[e.jsx(i,{value:"all",children:"Todas las categorías"}),L().map(s=>e.jsx(i,{value:s,children:s},s))]})]}),e.jsxs(g,{value:b,onValueChange:q,children:[e.jsx(u,{className:"border-gray-200 focus:border-primary focus:ring-primary",children:e.jsx(j,{placeholder:"Parque"})}),e.jsxs(y,{children:[e.jsx(i,{value:"all",children:"Todos los parques"}),le.map(s=>e.jsx(i,{value:s,children:s},s))]})]}),e.jsxs(g,{value:w,onValueChange:$,children:[e.jsx(u,{className:"border-gray-200 focus:border-primary focus:ring-primary",children:e.jsx(j,{placeholder:"Precio"})}),e.jsxs(y,{children:[e.jsx(i,{value:"all",children:"Todos los precios"}),e.jsx(i,{value:"free",children:"Gratuitas"}),e.jsx(i,{value:"paid",children:"De pago"})]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-white",children:["Mostrando ",R.length," de ",E.length," elementos"]}),e.jsxs(d,{variant:"outline",size:"sm",onClick:me,className:"bg-white text-gray-900 border-white hover:bg-gray-100",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Limpiar filtros"]})]})]})})}),e.jsx("section",{className:"bg-white border-t",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(d,{variant:"outline",onClick:ce,className:"flex items-center gap-2 border-[#51a19f] text-[#51a19f] hover:bg-[#51a19f] hover:text-white",children:[e.jsx(ye,{className:"w-4 h-4"}),"Anterior"]}),e.jsx("h2",{className:"text-3xl font-bold capitalize",style:{color:"#51a19f"},children:A(o,"MMMM yyyy",{locale:Z})}),e.jsxs(d,{variant:"outline",onClick:oe,className:"flex items-center gap-2 border-[#51a19f] text-[#51a19f] hover:bg-[#51a19f] hover:text-white",children:["Siguiente",e.jsx(Ne,{className:"w-4 h-4"})]})]})}),e.jsxs("div",{className:"pb-12",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"].map(s=>e.jsx("div",{className:"text-center font-semibold text-gray-700 py-2",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:xe.map((s,t)=>{const r=ne(s),l=s.getMonth()===o.getMonth(),p=W(s,new Date);return e.jsxs("div",{className:`min-h-32 p-2 border rounded-lg ${l?"bg-white border-gray-200":"bg-gray-50 border-gray-100"} ${p?"ring-2 ring-primary":""}`,children:[e.jsx("div",{className:`text-sm font-medium mb-2 ${l?"text-gray-900":"text-gray-400"} ${p?"text-primary font-bold":""}`,children:A(s,"d")}),e.jsxs("div",{className:"space-y-1",children:[r.slice(0,3).map((c,ge)=>e.jsxs("div",{onClick:()=>de(c),className:`text-xs p-1 rounded cursor-pointer hover:opacity-80 transition-opacity ${D(c.category,c.type)} text-white relative`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium truncate",children:c.title}),c.type==="event"&&e.jsx("span",{className:"text-[10px] opacity-75 ml-1",children:"E"})]}),c.startTime&&e.jsx("div",{className:"text-xs opacity-90",children:c.startTime})]},ge)),r.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 font-medium",children:["+",r.length-3," más..."]})]})]},t)})})]})]})}),e.jsx("section",{className:"bg-gray-50 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"¿Necesitas más información?"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Nuestro equipo está aquí para ayudarte"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"#51a19f"},children:e.jsx(fe,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Teléfono"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"(33) 1234-5678"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Lun-Vie 8:00-16:00"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"#51a19f"},children:e.jsx(X,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Correo"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"actividades@parques.gdl.gob.mx"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Respuesta en 24 horas"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"#51a19f"},children:e.jsx(Y,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Ubicación"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Av. Hidalgo 400, Centro"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Guadalajara, Jalisco"})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs(d,{size:"lg",className:"bg-green-600 hover:bg-green-700 px-8 py-3",children:[e.jsx(X,{className:"h-5 w-5 mr-2"}),"Enviar mensaje"]})})]})}),e.jsx(ve,{open:ae,onOpenChange:N,children:e.jsx(be,{className:"max-w-2xl",children:a&&e.jsxs(e.Fragment,{children:[e.jsx(we,{children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg ${D(a.category,a.type)} flex items-center justify-center flex-shrink-0`,children:e.jsx(Ce,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(De,{className:"text-xl font-bold text-gray-900 leading-tight",children:a.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(F,{variant:"secondary",className:`${D(a.category,a.type)} text-white`,children:a.category}),e.jsx(F,{variant:"outline",className:a.type==="activity"?"text-blue-600 border-blue-600":"text-purple-600 border-purple-600",children:a.type==="activity"?"Actividad":"Evento"}),a.isFree&&e.jsx(F,{variant:"outline",className:"text-green-600 border-green-600",children:"Gratuito"})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed",children:a.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Y,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-medium",children:a.parkName})]}),a.startDate&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(M,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-medium",children:A(h(a.startDate),"PPP",{locale:Z})})]}),a.startTime&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Se,{className:"w-4 h-4 text-primary"}),e.jsxs("span",{className:"font-medium",children:[a.startTime,a.endTime&&` - ${a.endTime}`]})]}),a.capacity&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(ke,{className:"w-4 h-4 text-primary"}),e.jsxs("span",{className:"font-medium",children:[a.capacity," personas max."]})]}),a.type==="activity"&&a.instructorName&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Q,{className:"w-4 h-4 text-primary"}),e.jsxs("span",{className:"font-medium",children:["Instructor: ",a.instructorName]})]}),a.type==="event"&&a.organizerName&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Q,{className:"w-4 h-4 text-primary"}),e.jsxs("span",{className:"font-medium",children:["Organizador: ",a.organizerName]})]}),a.type==="activity"&&!a.isFree&&a.price&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(H,{className:"w-4 h-4 text-primary"}),e.jsxs("span",{className:"font-medium",children:["$",a.price]})]})]}),a.type==="activity"&&a.targetAudience&&e.jsx("div",{className:"space-y-3 pt-4 border-t",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Público Objetivo"}),e.jsx("p",{className:"text-sm text-gray-600",children:a.targetAudience})]})}),a.type==="event"&&a.targetAudience&&e.jsx("div",{className:"space-y-3 pt-4 border-t",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Audiencia Objetivo"}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:a.targetAudience})]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(d,{className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",onClick:()=>{const s=a.type==="activity"?"activity":"events";window.open(`/${s}/${a.id}`,"_blank")},children:"Más Información"}),e.jsx(d,{variant:"outline",onClick:()=>N(!1),className:"text-primary border-primary hover:bg-primary hover:text-white",children:"Cerrar"})]})]})})})]})})};export{Le as default};
