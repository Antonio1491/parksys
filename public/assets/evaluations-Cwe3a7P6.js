import{a4 as g,u as j,j as e,bh as N,f as c,i,a5 as p,y as A,z as $,B as u,bv as y,I,J as z,K as B,b as n,W as K,Y as L,_ as Q,$ as V,a0 as f,ag as k,bj as H,g as O,h as U,q as J,v,dC as W,a3 as b,s as w}from"./index-BKCBrrzQ.js";const _=()=>{const[d,S]=g.useState("all"),[R,o]=g.useState(!1),{data:r}=j({queryKey:["/api/sponsors"],queryFn:()=>w("/api/sponsors",{})}),{data:x,isLoading:C}=j({queryKey:["/api/sponsorship-evaluations"],queryFn:async()=>{try{return await w("/api/sponsorship-evaluations",{})}catch(s){return console.error("Error cargando evaluaciones:",s),[]}},staleTime:5*60*1e3,gcTime:10*60*1e3}),l=(x==null?void 0:x.filter(s=>d==="all"?!0:s.sponsorId===parseInt(d)))||[],E=s=>s.length===0?0:s.reduce((t,q)=>t+(q.overallSatisfaction||0),0)/s.length,D=s=>s.length===0?0:s.filter(t=>t.wouldRenew).length/s.length*100,m=E(l),T=D(l),P=l.length,F=l.length>0?l.reduce((s,a)=>s+(a.recommendationScore||0),0)/l.length:0,h=s=>s>=8?"text-green-600":s>=6?"text-yellow-600":"text-red-600",M=s=>{const a=[];for(let t=1;t<=10;t++)a.push(e.jsx(n,{className:`w-4 h-4 ${t<=s?"text-yellow-400 fill-current":"text-gray-300"}`},t));return a};return C?e.jsx(N,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"},s))})]})}):e.jsx(N,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(c,{className:"bg-gray-50",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-8 h-8 text-gray-900"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Evaluaciones de Patrocinio"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Analiza la satisfacción de los patrocinadores"})]}),e.jsxs(A,{open:R,onOpenChange:o,children:[e.jsx($,{asChild:!0,children:e.jsxs(u,{className:"bg-[#00a587] hover:bg-[#067f5f]",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Nueva Evaluación"]})}),e.jsxs(I,{className:"max-w-2xl",children:[e.jsx(z,{children:e.jsx(B,{children:"Crear Nueva Evaluación"})}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(n,{className:"w-16 h-16 mx-auto text-[#00a587] mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Funcionalidad de evaluaciones en desarrollo"})]})]})]})]})})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filtrar por patrocinador:"}),e.jsxs(K,{value:d,onValueChange:S,children:[e.jsx(L,{className:"w-64",children:e.jsx(Q,{})}),e.jsxs(V,{children:[e.jsx(f,{value:"all",children:"Todos los patrocinadores"}),r==null?void 0:r.map(s=>e.jsx(f,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(c,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Evaluaciones Totales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P})]}),e.jsx(k,{className:"w-8 h-8 text-[#00a587]"})]})})}),e.jsx(c,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Calificación Promedio"}),e.jsxs("p",{className:`text-2xl font-bold ${h(m)}`,children:[m.toFixed(1),"/10"]})]}),e.jsx(n,{className:"w-8 h-8 text-yellow-500"})]})})}),e.jsx(c,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tasa de Renovación"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[T.toFixed(1),"%"]})]}),e.jsx(H,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(c,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"NPS Promedio"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:F.toFixed(1)})]}),e.jsx(p,{className:"w-8 h-8 text-purple-500"})]})})})]}),e.jsxs(c,{children:[e.jsx(O,{children:e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(n,{className:"w-5 h-5"}),"Evaluaciones Recientes"]})}),e.jsxs(i,{children:[e.jsx("div",{className:"space-y-6",children:l.map(s=>{const a=r==null?void 0:r.find(t=>t.id===s.sponsorId);return e.jsxs("div",{className:"border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h4",{className:"font-semibold text-lg text-gray-900",children:(a==null?void 0:a.name)||"Patrocinador Desconocido"}),e.jsx(J,{variant:"outline",children:v(new Date(s.evaluationDate),"dd/MM/yyyy",{locale:b})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-1",children:M(s.overallSatisfaction||0)}),e.jsxs("span",{className:`font-bold ${h(s.overallSatisfaction||0)}`,children:[s.overallSatisfaction,"/10"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Valor por dinero"}),e.jsxs("p",{className:"font-bold text-lg",children:[s.valueForMoney,"/10"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Organización"}),e.jsxs("p",{className:"font-bold text-lg",children:[s.organizationQuality,"/10"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Audiencia"}),e.jsxs("p",{className:"font-bold text-lg",children:[s.audienceQuality,"/10"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Comunicación"}),e.jsxs("p",{className:"font-bold text-lg",children:[s.communicationRating,"/10"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Logística"}),e.jsxs("p",{className:"font-bold text-lg",children:[s.logisticsRating,"/10"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"NPS"}),e.jsxs("p",{className:"font-bold text-lg",children:[s.recommendationScore,"/10"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Comentarios"}),e.jsx("p",{className:"text-sm text-gray-800 bg-gray-50 p-3 rounded",children:s.feedback||"Sin comentarios"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Sugerencias de mejora"}),e.jsx("p",{className:"text-sm text-gray-800 bg-gray-50 p-3 rounded",children:s.improvements||"Sin sugerencias"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:`w-4 h-4 ${s.wouldRenew?"text-green-600":"text-gray-400"}`}),e.jsx("span",{className:`text-sm ${s.wouldRenew?"text-green-600":"text-gray-600"}`,children:s.wouldRenew?"Renovaría el patrocinio":"No renovaría"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Evaluado el ",v(new Date(s.evaluationDate),"dd MMMM yyyy",{locale:b})]})]})]},s.id)})}),l.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(n,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No hay evaluaciones disponibles"}),e.jsx("p",{className:"text-gray-600 mb-4",children:d!=="all"?"Este patrocinador no tiene evaluaciones registradas":"Crea la primera evaluación de patrocinio"}),e.jsxs(u,{onClick:()=>o(!0),className:"bg-[#00a587] hover:bg-[#067f5f]",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Crear Evaluación"]})]})]})]})]})})};export{_ as default};
