import{ay as i,aH as B,u as M,aA as O,ar as K,j as e,bh as U,f as $,bv as J,B as A,g as Q,h as W,ad as X,i as Y,aI as Z,aJ as n,aK as t,aL as c,aM as o,V as x,aN as l,W as T,Y as E,_ as F,$ as L,a0 as C,a1 as P,aQ as d,cV as R,aP as q,aB as ee,cU as ae}from"./index-BKCBrrzQ.js";import{S as V}from"./switch-B8yCKxVc.js";import{L as se}from"./LocationSelector-D3bz-C3-.js";const re=[{id:"lunes",label:"Lunes"},{id:"martes",label:"Martes"},{id:"miercoles",label:"Mi칠rcoles"},{id:"jueves",label:"Jueves"},{id:"viernes",label:"Viernes"},{id:"sabado",label:"S치bado"},{id:"domingo",label:"Domingo"}],ie=[{id:"preescolar",label:"Preescolar - 0 a 5 a침os"},{id:"ninos",label:"Ni침os - 6 a 12 a침os"},{id:"adolescentes",label:"Adolescentes - 13 a 18 a침os"},{id:"adultos",label:"Adultos - 19 a 65 a침os"},{id:"adultosmayores",label:"Adultos Mayores - +65 a침os"}],ne=[{id:"fisica",label:"F칤sica / Motriz"},{id:"visual",label:"Visual"},{id:"auditiva",label:"Auditiva"},{id:"intelectual",label:"Intelectual / Cognitiva"},{id:"psicosocial",label:"Psicosocial / Mental"},{id:"neurodivergencias",label:"Neurodivergencias"},{id:"multiple",label:"M칰ltiple / Combinada"},{id:"temporal",label:"Temporal"}],te=i.object({title:i.string().min(3,"El t칤tulo debe tener al menos 3 caracteres"),description:i.string().min(10,"La descripci칩n debe tener al menos 10 caracteres"),category:i.string().min(1,"Debes seleccionar una categor칤a"),parkId:i.string().min(1,"Debes seleccionar un parque"),startDate:i.string().min(1,"La fecha de inicio es obligatoria"),endDate:i.string().optional(),startTime:i.string().min(1,"La hora de inicio es obligatoria"),endTime:i.string().min(1,"La hora de finalizaci칩n es obligatoria"),location:i.string().optional(),latitude:i.coerce.number().optional(),longitude:i.coerce.number().optional(),capacity:i.coerce.number().int().positive().optional(),duration:i.coerce.number().int().positive().optional(),price:i.coerce.number().min(0).optional(),isPriceRandom:i.boolean().default(!1),isFree:i.boolean().default(!1),materials:i.string().optional(),requirements:i.string().optional(),isRecurring:i.boolean().default(!1),recurringDays:i.array(i.string()).optional(),targetMarket:i.array(i.string()).optional(),specialNeeds:i.array(i.string()).optional(),instructorId:i.string().optional(),allowsPublicRegistration:i.boolean().default(!1),maxRegistrations:i.coerce.number().int().positive().optional(),registrationDeadline:i.string().optional(),registrationInstructions:i.string().optional(),requiresApproval:i.boolean().default(!1),ageRestrictions:i.string().optional(),healthRequirements:i.string().optional()});function z(D,g){if(!D||!g)return 0;try{const[b,k]=D.split(":").map(Number),[y,f]=g.split(":").map(Number);if(isNaN(b)||isNaN(k)||isNaN(y)||isNaN(f))return console.error("Error en formato de horas:",{horaInicio:D,horaFin:g}),0;const I=b*60+k,v=y*60+f;return v<I?24*60-I+v:v-I}catch(b){return console.error("Error al calcular duraci칩n:",b),0}}const de=()=>{const[D,g]=B(),{data:b,isLoading:k}=M({queryKey:["/api/parks"]}),y=Array.isArray(b)?b:[],{data:f,isLoading:I}=M({queryKey:["/api/activity-categories"]}),v=Array.isArray(f)?f:[],{data:H,isLoading:S}=M({queryKey:["/api/instructors"]}),N=Array.isArray(H)?H:[];console.log("游댢 Datos de instructores cargados:",{parques:y.length,categorias:v.length,instructores:N.length,instructoresData:N.slice(0,3)});const r=O({resolver:ee(te),defaultValues:{title:"",description:"",category:"",parkId:"",startDate:"",endDate:"",startTime:"09:00",endTime:"10:00",location:"",latitude:void 0,longitude:void 0,capacity:void 0,duration:void 0,price:0,isPriceRandom:!1,isFree:!1,materials:"",requirements:"",isRecurring:!1,recurringDays:[],targetMarket:[],specialNeeds:[],instructorId:"",allowsPublicRegistration:!1,maxRegistrations:void 0,registrationDeadline:"",registrationInstructions:"",requiresApproval:!1,ageRestrictions:"",healthRequirements:""}}),w=K({mutationFn:async a=>{const s=parseInt(a.parkId);let u={};if(a.instructorId){const p=N.find(_=>_.id.toString()===a.instructorId);p&&(u={instructorId:p.id,instructorName:`${p.fullName||p.username||""}`.trim(),instructorContact:p.email||""})}let m=a.duration;a.startTime&&a.endTime&&(m=z(a.startTime,a.endTime));const h={title:a.title,description:a.description,parkId:s,startDate:a.startDate,endDate:a.endDate||null,startTime:a.startTime,endTime:a.endTime,category_id:parseInt(a.category),location:a.location||null,latitude:a.latitude||null,longitude:a.longitude||null,capacity:a.capacity||null,duration:m||null,price:a.price||0,isPriceRandom:a.isPriceRandom||!1,isFree:a.isFree||!1,materials:a.materials||"",requirements:a.requirements||"",isRecurring:a.isRecurring||!1,recurringDays:a.recurringDays||[],targetMarket:a.targetMarket||[],specialNeeds:a.specialNeeds||[],allowsPublicRegistration:a.allowsPublicRegistration||!1,maxRegistrations:a.maxRegistrations||null,registrationDeadline:a.registrationDeadline||null,registrationInstructions:a.registrationInstructions||"",requiresApproval:a.requiresApproval||!1,ageRestrictions:a.ageRestrictions||"",healthRequirements:a.healthRequirements||"",registrationStatus:a.allowsPublicRegistration?"open":"closed",currentRegistrations:0,...u};console.log("Enviando datos a la API:",h);const j=await fetch("/api/activities",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(h)});if(!j.ok){const p=await j.text();throw console.error("Error en la respuesta:",p),new Error(`Error al crear actividad: ${j.status} ${p}`)}return await j.json()},onSuccess:a=>{R({title:"Actividad creada",description:"La actividad ha sido creada exitosamente. Ahora puedes agregar im치genes.",variant:"default"}),ae.invalidateQueries(),setTimeout(()=>{g(`/admin/activities/${a.id}/images`)},500)},onError:a=>{console.error("Error al crear actividad:",a),R({title:"Error",description:"Hubo un problema al crear la actividad. Por favor, intenta nuevamente.",variant:"destructive"})}}),G=a=>{w.mutate(a)};return e.jsx(U,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{className:"p-4 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-8 h-8 text-gray-900"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Crear Nueva Actividad"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Completa el formulario para crear una nueva actividad para el cat치logo"})]}),e.jsx(A,{variant:"outline",onClick:()=>g("/admin/activities/management"),children:"Actividades Disponibles"})]})}),e.jsxs($,{children:[e.jsxs(Q,{children:[e.jsx(W,{children:"Formulario de Actividad"}),e.jsx(X,{children:"Ingresa la informaci칩n completa de la actividad. Los campos marcados con * son obligatorios."})]}),e.jsx(Y,{children:e.jsx(Z,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(G),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Informaci칩n B치sica"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{control:r.control,name:"title",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"T칤tulo *"}),e.jsx(o,{children:e.jsx(x,{placeholder:"Ej: Taller de Pintura",...a})}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"category",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Categor칤a *"}),e.jsxs(T,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(o,{children:e.jsx(E,{children:e.jsx(F,{placeholder:"Selecciona una categor칤a"})})}),e.jsx(L,{children:v.map(s=>e.jsx(C,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx(l,{})]})})]}),e.jsx(n,{control:r.control,name:"description",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Descripci칩n *"}),e.jsx(o,{children:e.jsx(P,{placeholder:"Describe la actividad en detalle",className:"min-h-[120px]",...a})}),e.jsx(d,{children:"Incluye detalles importantes sobre lo que los participantes har치n y aprender치n."}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"parkId",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Parque *"}),e.jsxs(T,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(o,{children:e.jsx(E,{children:e.jsx(F,{placeholder:"Selecciona un parque"})})}),e.jsx(L,{children:y.map(s=>e.jsx(C,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"location",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Ubicaci칩n dentro del parque"}),e.jsx(o,{children:e.jsx(se,{parkId:r.watch("parkId")?Number(r.watch("parkId")):void 0,value:a.value,onChange:a.onChange,placeholder:"Seleccionar ubicaci칩n"})}),e.jsx(d,{children:"Especifica d칩nde dentro del parque se realizar치 la actividad"}),e.jsx(l,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Coordenadas GPS Exactas"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Establece las coordenadas GPS espec칤ficas donde se llevar치 a cabo la actividad dentro del parque."})]}),e.jsx(n,{control:r.control,name:"latitude",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Latitud"}),e.jsx(o,{children:e.jsx(x,{...a,type:"number",step:"any",placeholder:"20.123456",value:a.value||"",onChange:s=>a.onChange(s.target.value?parseFloat(s.target.value):void 0)})}),e.jsx(d,{children:"Coordenada de latitud (ej: 20.123456)"}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"longitude",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Longitud"}),e.jsx(o,{children:e.jsx(x,{...a,type:"number",step:"any",placeholder:"-103.123456",value:a.value||"",onChange:s=>a.onChange(s.target.value?parseFloat(s.target.value):void 0)})}),e.jsx(d,{children:"Coordenada de longitud (ej: -103.123456)"}),e.jsx(l,{})]})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(A,{type:"button",variant:"outline",onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(a=>{r.setValue("latitude",a.coords.latitude),r.setValue("longitude",a.coords.longitude),R({title:"Ubicaci칩n obtenida",description:"Las coordenadas GPS han sido establecidas autom치ticamente."})},a=>{R({title:"Error",description:"No se pudo obtener la ubicaci칩n. Por favor ingresa las coordenadas manualmente.",variant:"destructive"})}):R({title:"No soportado",description:"Tu navegador no soporta la geolocalizaci칩n.",variant:"destructive"})},className:"w-full",children:"游늸 Obtener Ubicaci칩n Actual"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Haz clic para obtener autom치ticamente tu ubicaci칩n GPS actual"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Segmentaci칩n"}),e.jsx(n,{control:r.control,name:"targetMarket",render:()=>e.jsxs(t,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(c,{children:"Mercado Meta"}),e.jsx(d,{children:"Selecciona los grupos de edad a los que est치 dirigida esta actividad"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:ie.map(a=>e.jsx(n,{control:r.control,name:"targetMarket",render:({field:s})=>{var u;return e.jsxs(t,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(o,{children:e.jsx(q,{checked:(u=s.value)==null?void 0:u.includes(a.id),onCheckedChange:m=>{var h;return m?s.onChange([...s.value||[],a.id]):s.onChange((h=s.value)==null?void 0:h.filter(j=>j!==a.id))}})}),e.jsx(c,{className:"font-normal",children:a.label})]},a.id)}},a.id))}),e.jsx(l,{})]})})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Capacidades Diferentes"}),e.jsx(n,{control:r.control,name:"specialNeeds",render:()=>e.jsxs(t,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(c,{children:"Accesibilidad para personas con capacidades diferentes"}),e.jsx(d,{children:"Selecciona los tipos de discapacidad para los que esta actividad est치 adaptada"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:ne.map(a=>e.jsx(n,{control:r.control,name:"specialNeeds",render:({field:s})=>{var u;return e.jsxs(t,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(o,{children:e.jsx(q,{checked:(u=s.value)==null?void 0:u.includes(a.id),onCheckedChange:m=>{var h;return m?s.onChange([...s.value||[],a.id]):s.onChange((h=s.value)==null?void 0:h.filter(j=>j!==a.id))}})}),e.jsx(c,{className:"font-normal",children:a.label})]},a.id)}},a.id))}),e.jsx(l,{})]})})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Fecha y Horario"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{control:r.control,name:"startDate",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Fecha de inicio *"}),e.jsx(o,{children:e.jsx(x,{type:"date",...a})}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"endDate",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Fecha de finalizaci칩n"}),e.jsx(o,{children:e.jsx(x,{type:"date",...a})}),e.jsx(d,{children:"Opcional para actividades de un solo d칤a"}),e.jsx(l,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{control:r.control,name:"startTime",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Hora de inicio *"}),e.jsx(o,{children:e.jsx(x,{type:"time",...a,onChange:s=>{a.onChange(s);const u=r.getValues("endTime");if(u){const m=z(s.target.value,u);r.setValue("duration",m)}}})}),e.jsx(d,{children:"Hora a la que comenzar치 la actividad"}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"endTime",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Hora de finalizaci칩n *"}),e.jsx(o,{children:e.jsx(x,{type:"time",...a,onChange:s=>{a.onChange(s);const u=r.getValues("startTime");if(u){const m=z(u,s.target.value);r.setValue("duration",m)}}})}),e.jsx(d,{children:"Hora a la que terminar치 la actividad"}),e.jsx(l,{})]})})]}),e.jsx(n,{control:r.control,name:"duration",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Duraci칩n (minutos)"}),e.jsx(o,{children:e.jsx(x,{type:"number",min:"0",placeholder:"Se calcula autom치ticamente",...a,disabled:!0})}),e.jsx(d,{children:"Se calcula autom치ticamente basado en la hora de inicio y finalizaci칩n"}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"isRecurring",render:({field:a})=>e.jsxs(t,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{children:"Actividad recurrente"}),e.jsx(d,{children:"Marca esta opci칩n si la actividad se repite en d칤as espec칤ficos"})]}),e.jsx(o,{children:e.jsx(V,{checked:a.value,onCheckedChange:a.onChange})})]})}),r.watch("isRecurring")&&e.jsx(n,{control:r.control,name:"recurringDays",render:()=>e.jsxs(t,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(c,{children:"D칤as de la semana"}),e.jsx(d,{children:"Selecciona los d칤as en que se repite la actividad"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:re.map(a=>e.jsx(n,{control:r.control,name:"recurringDays",render:({field:s})=>{var u;return e.jsxs(t,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(o,{children:e.jsx(q,{checked:(u=s.value)==null?void 0:u.includes(a.id),onCheckedChange:m=>{var h;return m?s.onChange([...s.value||[],a.id]):s.onChange((h=s.value)==null?void 0:h.filter(j=>j!==a.id))}})}),e.jsx(c,{className:"font-normal",children:a.label})]},a.id)}},a.id))}),e.jsx(l,{})]})})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Capacidad y Materiales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{control:r.control,name:"capacity",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Capacidad m치xima"}),e.jsx(o,{children:e.jsx(x,{type:"number",min:"0",placeholder:"Ej: 20",...a})}),e.jsx(d,{children:"N칰mero m치ximo de participantes permitidos"}),e.jsx(l,{})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{control:r.control,name:"price",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Precio (MXN)"}),e.jsx(o,{children:e.jsx(x,{type:"number",min:"0",step:"0.01",placeholder:"Ej: 50.00",...a,disabled:r.watch("isFree")||r.watch("isPriceRandom")})}),e.jsx(d,{children:r.watch("isFree")?"Actividad gratuita":r.watch("isPriceRandom")?"El precio ser치 variable o por donativo":"Precio fijo por persona"}),e.jsx(l,{})]})}),e.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[e.jsx(n,{control:r.control,name:"isFree",render:({field:a})=>e.jsxs(t,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(o,{children:e.jsx(q,{checked:a.value,onCheckedChange:s=>{a.onChange(s),s&&(r.setValue("price",0),r.setValue("isPriceRandom",!1))}})}),e.jsx(c,{className:"font-medium",children:"Actividad Gratuita"})]})}),e.jsx(n,{control:r.control,name:"isPriceRandom",render:({field:a})=>e.jsxs(t,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(o,{children:e.jsx(q,{checked:a.value,onCheckedChange:s=>{a.onChange(s),s&&r.setValue("isFree",!1)}})}),e.jsx(c,{className:"font-medium",children:"Precio Aleatorio (Donativo/Variable)"})]})})]})]})]}),e.jsx(n,{control:r.control,name:"materials",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Materiales necesarios"}),e.jsx(o,{children:e.jsx(P,{placeholder:"Lista de materiales que se usar치n o que deben traer los participantes",...a})}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"requirements",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Requisitos para participantes"}),e.jsx(o,{children:e.jsx(P,{placeholder:"Requisitos especiales, rango de edad, condiciones f칤sicas, etc.",...a})}),e.jsx(l,{})]})})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Configuraci칩n de Registro Ciudadano"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configura si los ciudadanos pueden inscribirse a esta actividad desde el sitio p칰blico"}),e.jsx(n,{control:r.control,name:"allowsPublicRegistration",render:({field:a})=>e.jsxs(t,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{className:"text-base",children:"Permitir inscripci칩n p칰blica"}),e.jsx(d,{children:"Los ciudadanos podr치n inscribirse a esta actividad desde la p치gina p칰blica"})]}),e.jsx(o,{children:e.jsx(V,{checked:a.value,onCheckedChange:a.onChange})})]})}),r.watch("allowsPublicRegistration")&&e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{control:r.control,name:"maxRegistrations",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Capacidad m치xima de inscripciones"}),e.jsx(o,{children:e.jsx(x,{type:"number",placeholder:"Ej: 25",...a,value:a.value||"",onChange:s=>a.onChange(s.target.value?parseInt(s.target.value):void 0)})}),e.jsx(d,{children:"N칰mero m치ximo de personas que se pueden inscribir. Se recomienda que coincida con el n칰mero m치ximo escrito en la secci칩n de Capacidad y Materiales."}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"registrationDeadline",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Fecha l칤mite de inscripci칩n"}),e.jsx(o,{children:e.jsx(x,{type:"date",...a,value:a.value||""})}),e.jsx(d,{children:"Fecha despu칠s de la cual no se aceptan inscripciones"}),e.jsx(l,{})]})})]}),e.jsx(n,{control:r.control,name:"registrationInstructions",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Instrucciones para inscripci칩n"}),e.jsx(o,{children:e.jsx(P,{placeholder:"Instrucciones espec칤ficas para los participantes al inscribirse",...a,value:a.value||""})}),e.jsx(d,{children:"Informaci칩n adicional que ver치n los ciudadanos al inscribirse"}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"requiresApproval",render:({field:a})=>e.jsxs(t,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{className:"text-base",children:"Requiere aprobaci칩n administrativa"}),e.jsx(d,{children:"Las inscripciones deben ser aprobadas manualmente por un administrador"})]}),e.jsx(o,{children:e.jsx(V,{checked:a.value,onCheckedChange:a.onChange})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{control:r.control,name:"ageRestrictions",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Restricciones de edad"}),e.jsx(o,{children:e.jsx(x,{placeholder:"Ej: Mayores de 18 a침os",...a,value:a.value||""})}),e.jsx(d,{children:"Restricciones espec칤ficas de edad para participar"}),e.jsx(l,{})]})}),e.jsx(n,{control:r.control,name:"healthRequirements",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Requisitos de salud"}),e.jsx(o,{children:e.jsx(x,{placeholder:"Ej: Certificado m칠dico, buena condici칩n f칤sica",...a,value:a.value||""})}),e.jsx(d,{children:"Requisitos m칠dicos o de salud para participar"}),e.jsx(l,{})]})})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Datos del Instructor o Facilitador"}),e.jsx(n,{control:r.control,name:"instructorId",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:"Seleccionar Instructor"}),e.jsxs(T,{onValueChange:a.onChange,defaultValue:a.value,disabled:S,children:[e.jsx(o,{children:e.jsx(E,{children:e.jsx(F,{placeholder:S?"Cargando instructores...":"Selecciona un instructor"})})}),e.jsx(L,{children:S?e.jsx(C,{value:"loading",disabled:!0,children:"Cargando instructores..."}):N.length===0?e.jsx(C,{value:"no-instructors",disabled:!0,children:"No hay instructores disponibles"}):N.map(s=>e.jsxs(C,{value:s.id.toString(),children:[s.full_name||s.fullName||`${s.firstName||""} ${s.lastName||""}`.trim(),s.email&&` (${s.email})`]},s.id))})]}),e.jsx(d,{children:"Selecciona un instructor registrado en el sistema. Si el instructor que buscas no est치 en la lista, primero debes registrarlo en la secci칩n de Instructores."}),e.jsx(l,{})]})}),!S&&N.length===0&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-4 my-4",children:e.jsx("p",{className:"text-amber-800",children:"No hay instructores registrados en el sistema. Dir칤gete a la secci칩n de Instructores en este m칩dulo de Actividades, para crear un Instructor primero."})})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(A,{type:"button",variant:"outline",onClick:()=>g("/admin/organizador/catalogo/ver"),children:"Cancelar"}),e.jsx(A,{type:"submit",disabled:w.isPending,children:w.isPending?"Guardando...":"Guardar Actividad"})]})})]})})})]})]})})};export{de as default};
