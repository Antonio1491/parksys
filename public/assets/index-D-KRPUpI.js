import{c as q,a4 as j,l as $,u as C,ar as H,j as e,bh as g,f as S,a5 as v,B as d,bG as L,n as K,i as G,a6 as J,V as O,W as Q,Y as W,_ as Y,$ as U,a0 as i,bH as X,bI as Z,bJ as p,bK as t,bL as ee,bM as r,q as se,d0 as P,d2 as ae,d3 as re,d5 as te,d4 as le,d6 as ne,d7 as ie,aC as ce,dr as de}from"./index-BKCBrrzQ.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=q("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),me=()=>{const[l,T]=j.useState(""),[o,_]=j.useState("all"),[n,x]=j.useState(1),m=10,{toast:N}=$(),{data:k=[],isLoading:I,isError:D,refetch:f}=C({queryKey:["/api/volunteers/recognitions/all"]}),h=H({mutationFn:async()=>await ce("POST","/api/admin/seed/recognitions"),onSuccess:()=>{N({title:"Datos de muestra cargados",description:"Los reconocimientos de muestra se han cargado correctamente"}),f()},onError:s=>{console.error("Error al cargar datos de muestra:",s),N({title:"Error",description:"No se pudieron cargar los datos de muestra. Intente nuevamente.",variant:"destructive"})}}),{data:y=[]}=C({queryKey:["/api/volunteers"]}),b=k.filter(s=>{if(!s||!s.recognition_type||!s.reason)return!1;const a=y.find(z=>z.id===s.volunteer_id),u=a?a.fullName:`Voluntario ID: ${s.volunteer_id}`,M=l===""||u.toLowerCase().includes(l.toLowerCase())||s.recognition_type.toLowerCase().includes(l.toLowerCase())||s.reason.toLowerCase().includes(l.toLowerCase()),F=o==="all"||s.recognition_type===o;return M&&F}),w=b.slice((n-1)*m,n*m),c=Math.ceil(b.length/m),R=s=>{const a=y.find(u=>u.id===s);return a?a.fullName:`Voluntario ID: ${s}`},V=s=>`Administrador ID: ${s}`,E=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),A=s=>{switch(s.toLowerCase()){case"diploma":return e.jsx(v,{className:"h-5 w-5 text-blue-500"});case"medal":return e.jsx(de,{className:"h-5 w-5 text-yellow-500"});case"certificate":return e.jsx(P,{className:"h-5 w-5 text-green-500"});case"level-upgrade":return e.jsx(oe,{className:"h-5 w-5 text-purple-500"});default:return e.jsx(v,{className:"h-5 w-5 text-gray-500"})}},B=s=>{if(!s)return"bg-gray-200 text-gray-800";switch(s.toLowerCase()){case"bronze":return"bg-amber-700 text-white";case"silver":return"bg-gray-400 text-white";case"gold":return"bg-yellow-500 text-white";case"platinum":return"bg-blue-600 text-white";default:return"bg-gray-200 text-gray-800"}};return I?e.jsx(g,{children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}):D?e.jsx(g,{children:e.jsx("div",{className:"p-4 bg-red-50 text-red-500 rounded-md",children:"Error al cargar los reconocimientos. Por favor, intente nuevamente."})}):e.jsx(g,{children:e.jsxs("div",{className:"p-6",children:[e.jsx(S,{className:"p-4 bg-gray-50 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-8 h-8 text-gray-900"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reconocimientos de Voluntarios"})]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"GestiÃ³n de reconocimientos otorgados a voluntarios"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(d,{onClick:()=>h.mutate(),variant:"outline",disabled:h.isPending,children:h.isPending?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-b-0 border-r-0 border-gray-400 rounded-full"}),"Cargando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Cargar datos de muestra"]})}),e.jsxs(d,{variant:"outline",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Nuevo Reconocimiento"]})]})]})}),e.jsx(S,{children:e.jsxs(G,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),e.jsx(O,{type:"search",placeholder:"Buscar reconocimiento...",className:"pl-8",value:l,onChange:s=>T(s.target.value)})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs(Q,{value:o,onValueChange:_,children:[e.jsx(W,{children:e.jsx(Y,{placeholder:"Filtrar por tipo"})}),e.jsxs(U,{children:[e.jsx(i,{value:"all",children:"Todos los tipos"}),e.jsx(i,{value:"diploma",children:"Diplomas"}),e.jsx(i,{value:"medal",children:"Medallas"}),e.jsx(i,{value:"certificate",children:"Certificados"}),e.jsx(i,{value:"level-upgrade",children:"Ascensos de nivel"})]})]})}),e.jsx("div",{children:e.jsxs(d,{onClick:()=>f(),variant:"outline",className:"w-full md:w-auto",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Actualizar"]})})]}),e.jsx("div",{className:"border rounded-md",children:e.jsxs(X,{children:[e.jsx(Z,{className:"bg-gray-100",children:e.jsxs(p,{children:[e.jsx(t,{className:"w-16",children:"ID"}),e.jsx(t,{children:"Voluntario"}),e.jsx(t,{children:"Tipo"}),e.jsx(t,{children:"Nivel"}),e.jsx(t,{children:"Motivo"}),e.jsx(t,{children:"Fecha"}),e.jsx(t,{className:"text-right",children:"Acciones"})]})}),e.jsx(ee,{children:w.length===0?e.jsx(p,{children:e.jsx(r,{colSpan:7,className:"text-center py-8 text-gray-500",children:"No se encontraron reconocimientos"})}):w.map(s=>e.jsxs(p,{children:[e.jsx(r,{className:"font-medium",children:s.id}),e.jsxs(r,{children:[e.jsx("div",{className:"font-medium",children:R(s.volunteer_id)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",s.volunteer_id]})]}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[A(s.recognition_type),e.jsx("span",{children:s.recognition_type})]})}),e.jsx(r,{children:s.level?e.jsx(se,{className:B(s.level),children:s.level}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(r,{children:e.jsx("div",{className:"max-w-xs truncate",title:s.reason,children:s.reason})}),e.jsxs(r,{children:[e.jsx("div",{className:"text-sm",children:E(s.issued_at)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Por: ",V(s.issued_by_id)]})]}),e.jsx(r,{className:"text-right",children:e.jsx("div",{className:"flex justify-end gap-2",children:e.jsxs(d,{variant:"ghost",size:"sm",className:"h-8 px-2",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Editar"})]})})})]},s.id))})]})}),c>1&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx(ae,{children:e.jsxs(re,{children:[e.jsx(te,{onClick:()=>x(s=>Math.max(1,s-1)),disabled:n===1}),[...Array(c)].map((s,a)=>e.jsx(le,{children:e.jsx(ne,{onClick:()=>x(a+1),isActive:n===a+1,children:a+1})},a+1)),e.jsx(ie,{onClick:()=>x(s=>Math.min(c,s+1)),disabled:n===c})]})})})]})})]})})};export{me as default};
