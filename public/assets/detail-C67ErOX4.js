import{k as O,aH as Y,a4 as k,u as g,j as e,bh as f,B as t,A as v,bG as m,f as l,i as c,O as K,g as h,h as o,ad as u,aa as _,ab as G,ac as z,r as Q,P as J,ai as W,cf as b,n as X,m as Z,bk as ee,bl as se,bm as y,d8 as I,F as N,bn as w,q as x,b as C,an as ae,D as re,v as le,a3 as ce}from"./index-BKCBrrzQ.js";function ie(){var E;const D=O(),[,p]=Y(),i=parseInt(D.id),[T,L]=k.useState("profile");k.useState(null);const{data:S,isLoading:V,isError:$,refetch:A}=g({queryKey:[`/api/instructors/${i}`],enabled:!isNaN(i)}),a=S||{id:0,fullName:"",email:"",phone:"",specialties:[],experienceYears:0,status:"pending",profileImageUrl:"",curriculumUrl:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),education:""},{data:n,isLoading:F}=g({queryKey:[`/api/activities?instructorId=${i}`],enabled:!isNaN(i)}),{data:d,isLoading:P}=g({queryKey:[`/api/evaluations/instructors?instructorId=${i}`],enabled:!isNaN(i)}),U=()=>{if(a.curriculumUrl){const s=document.createElement("a");s.href=a.curriculumUrl,s.download=`CV_${a.fullName}.pdf`,document.body.appendChild(s),s.click(),document.body.removeChild(s)}},R=()=>{a.curriculumUrl&&window.open(a.curriculumUrl,"_blank")},j=s=>{if(!s)return"Fecha no disponible";try{return le(new Date(s),"dd MMMM yyyy",{locale:ce})}catch{return"Fecha inválida"}},B=s=>s?s.split(" ").map(r=>r[0]).slice(0,2).join("").toUpperCase():"??",M=s=>{switch(s){case"active":return e.jsx(x,{className:"bg-green-100 text-green-800",children:"Activo"});case"inactive":return e.jsx(x,{className:"bg-gray-100 text-gray-800",children:"Inactivo"});case"pending":return e.jsx(x,{className:"bg-yellow-100 text-yellow-800",children:"Pendiente"});default:return e.jsx(x,{children:s})}},q=s=>!s||!Array.isArray(s)||s.length===0?e.jsx("span",{className:"text-gray-400 italic",children:"Sin especialidades registradas"}):s.map((r,H)=>e.jsx(x,{variant:"outline",className:"mr-1 mb-1",children:r},H));return V?e.jsx(f,{children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs(t,{variant:"ghost",onClick:()=>p("/admin/activities/instructors"),className:"mr-4",children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Volver"]}),e.jsx("h1",{className:"text-2xl font-bold",children:"Cargando instructor..."})]}),e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(m,{className:"h-8 w-8 animate-spin text-gray-400"})})]})}):$?e.jsx(f,{children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs(t,{variant:"ghost",onClick:()=>p("/admin/activities/instructors"),className:"mr-4",children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Volver"]}),e.jsx("h1",{className:"text-2xl font-bold",children:"Error al cargar instructor"})]}),e.jsx(l,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(K,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-medium mb-2",children:"No se pudo cargar la información del instructor"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Ha ocurrido un error al intentar obtener los datos. Por favor, intenta nuevamente."}),e.jsxs(t,{onClick:()=>A(),children:[e.jsx(m,{className:"mr-2 h-4 w-4"}),"Reintentar"]})]})})})]})}):e.jsx(f,{children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(t,{variant:"ghost",onClick:()=>p("/admin/activities/instructors"),className:"mr-4",children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Volver"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a.fullName}),e.jsxs("p",{className:"text-muted-foreground",children:["Instructor desde ",j(a.createdAt)]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(t,{variant:"outline",onClick:()=>A(),children:[e.jsx(m,{className:"h-4 w-4 mr-2"}),"Actualizar"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{children:[e.jsxs(h,{children:[e.jsx(o,{children:"Perfil"}),e.jsx(u,{children:"Información personal del instructor"})]}),e.jsxs(c,{className:"pt-0",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsxs(_,{className:"h-32 w-32 mb-4",children:[e.jsx(G,{src:a.profileImageUrl,alt:a.fullName}),e.jsx(z,{className:"text-2xl",children:B(a.fullName)})]}),e.jsx("h2",{className:"text-xl font-bold",children:a.fullName}),e.jsx("div",{className:"mt-2",children:M(a.status)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Email"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("span",{children:a.email})]})]}),a.phone&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Teléfono"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("span",{children:a.phone})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Experiencia"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsxs("span",{children:[a.experienceYears," ",a.experienceYears===1?"año":"años"]})]})]}),a.education&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Educación"}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(b,{className:"h-4 w-4 mr-2 text-gray-400 mt-0.5"}),e.jsx("span",{className:"text-sm",children:a.education})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Fecha de registro"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("span",{children:j(a.createdAt)})]})]}),e.jsx(Z,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-2",children:"Especialidades"}),e.jsx("div",{className:"flex flex-wrap",children:q(a.specialties)})]})]})]})]}),e.jsxs(l,{children:[e.jsx(h,{children:e.jsx(o,{children:"Estadísticas"})}),e.jsx(c,{className:"pt-0",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Actividades"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:(n==null?void 0:n.length)||0})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Evaluaciones"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:(d==null?void 0:d.length)||0})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Años de exp."}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:a.experienceYears})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Calificación"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:((E=a.rating)==null?void 0:E.toFixed(1))||"0.0"})]})]})})]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs(ee,{defaultValue:"activities",onValueChange:L,value:T,children:[e.jsxs(se,{className:"mb-4",children:[e.jsxs(y,{value:"activities",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Actividades"]}),e.jsxs(y,{value:"evaluations",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Evaluaciones"]}),e.jsxs(y,{value:"curriculum",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Currículum"]})]}),e.jsx(w,{value:"activities",children:F?e.jsx(l,{children:e.jsx(c,{className:"pt-6",children:e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(m,{className:"h-5 w-5 animate-spin text-gray-400"})})})}):!n||n.length===0?e.jsx(l,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-6",children:[e.jsx(I,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No hay actividades asignadas a este instructor."})]})})}):e.jsx("div",{className:"space-y-4",children:n.slice(0,5).map(s=>e.jsxs(l,{children:[e.jsx(h,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-lg",children:s.title}),e.jsx(u,{children:s.description})]}),e.jsx(x,{variant:"outline",children:s.category})]})}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Fecha:"}),e.jsx("p",{children:s.startDate?j(s.startDate):"No especificada"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Horario:"}),e.jsx("p",{children:s.startTime?`${s.startTime} - ${s.endTime}`:"No especificado"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Capacidad:"}),e.jsx("p",{children:s.capacity||"Ilimitada"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Precio:"}),e.jsx("p",{children:s.isFree?"Gratuita":`$${s.price||"0"}`})]})]})})]},s.id))})}),e.jsx(w,{value:"evaluations",children:P?e.jsx(l,{children:e.jsx(c,{className:"pt-6",children:e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(m,{className:"h-5 w-5 animate-spin text-gray-400"})})})}):!d||d.length===0?e.jsx(l,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-6",children:[e.jsx(b,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No hay evaluaciones disponibles para este instructor."})]})})}):e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsxs(l,{children:[e.jsx(h,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(o,{className:"text-lg",children:["Evaluación #",s.id]}),e.jsxs(u,{children:["Evaluado el ",j(s.createdAt)]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 text-yellow-400 mr-1"}),e.jsxs("span",{className:"font-semibold",children:[s.overallRating,"/5"]})]})]})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Paciencia:"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(r=>e.jsx(C,{className:`h-4 w-4 ${r<=s.patienceRating?"text-yellow-400 fill-current":"text-gray-300"}`},r))}),e.jsxs("span",{className:"ml-2 text-sm",children:[s.patienceRating,"/5"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Claridad:"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(r=>e.jsx(C,{className:`h-4 w-4 ${r<=s.clarityRating?"text-yellow-400 fill-current":"text-gray-300"}`},r))}),e.jsxs("span",{className:"ml-2 text-sm",children:[s.clarityRating,"/5"]})]})]})]}),s.comments&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Comentarios:"}),e.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:s.comments})]})]})})]},s.id))})}),e.jsx(w,{value:"curriculum",children:e.jsxs(l,{children:[e.jsxs(h,{children:[e.jsxs(o,{className:"flex items-center",children:[e.jsx(N,{className:"h-5 w-5 mr-2"}),"Currículum Vitae"]}),e.jsx(u,{children:"Documento de currículum del instructor"})]}),e.jsx(c,{children:a.curriculumUrl?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"h-8 w-8 text-blue-500 mr-3"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["CV_",a.fullName,".pdf"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Currículum vitae del instructor"})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(t,{onClick:R,variant:"default",className:"flex items-center",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Ver currículum"]}),e.jsxs(t,{onClick:U,variant:"outline",className:"flex items-center",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Descargar"]})]}),a.bio&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Biografía"}),e.jsx("p",{className:"text-blue-800 text-sm",children:a.bio})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(N,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No hay currículum disponible"}),e.jsx("p",{className:"text-sm text-gray-400",children:"El instructor no ha subido su currículum vitae aún."})]})})]})})]})})]})]})})}export{ie as default};
