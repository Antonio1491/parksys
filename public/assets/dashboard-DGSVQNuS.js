import{aH as ie,a4 as ce,u as F,j as e,b7 as x,bi as m,f as r,i as t,O as I,B as h,bG as z,g as c,h as l,bj as le,ad as G,M as V,ah as $,H as K,n as u,a$ as O,a6 as de,V as oe,bH as xe,bI as me,bJ as j,bK as d,bL as he,bM as i,q as J,an as ue,v as je,a3 as pe}from"./index-BKCBrrzQ.js";function ve(){var b,f,w,y,C,E,k,T,R,L,H,A,P,q,M;const[,Q]=ie(),[o,U]=ce.useState(""),{data:W,isLoading:X,isError:Y,refetch:p}=F({queryKey:["/api/evaluations/stats"]}),{data:Z,isLoading:_,isError:ee,refetch:N}=F({queryKey:["/api/evaluations/recent"]}),a=W||{},v=Z||[],se=s=>{if(!s)return"Fecha no disponible";try{return je(new Date(s),"dd MMM yyyy, HH:mm",{locale:pe})}catch{return"Fecha inválida"}},g=Array.isArray(v)?v.filter(s=>{var S,D,B;return((S=s.entityName)==null?void 0:S.toLowerCase().includes(o.toLowerCase()))||((D=s.evaluatorName)==null?void 0:D.toLowerCase().includes(o.toLowerCase()))||((B=s.comments)==null?void 0:B.toLowerCase().includes(o.toLowerCase()))}):[],n=s=>{Q(`/admin/evaluaciones/${s}`)},ae=s=>{switch(s){case"park":return e.jsx(V,{className:"h-4 w-4"});case"instructor":return e.jsx($,{className:"h-4 w-4"});case"volunteer":return e.jsx(K,{className:"h-4 w-4"});case"activity":return e.jsx(u,{className:"h-4 w-4"});case"concessionaire":return e.jsx(O,{className:"h-4 w-4"});default:return e.jsx(I,{className:"h-4 w-4"})}},re=s=>{switch(s){case"park":return"bg-green-100 text-green-800";case"instructor":return"bg-blue-100 text-blue-800";case"volunteer":return"bg-purple-100 text-purple-800";case"activity":return"bg-orange-100 text-orange-800";case"concessionaire":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},te=s=>{switch(s){case"park":return"Parque";case"instructor":return"Instructor";case"volunteer":return"Voluntario";case"activity":return"Actividad";case"concessionaire":return"Concesionario";default:return s}};return X||_?e.jsx(x,{icon:m,title:"Evaluaciones",subtitle:"Gestión centralizada del sistema de evaluaciones",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})})}):Y||ee?e.jsx(x,{icon:m,title:"Evaluaciones",subtitle:"Gestión centralizada del sistema de evaluaciones",children:e.jsx(r,{className:"mt-6",children:e.jsx(t,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-medium mb-2",children:"Error al cargar estadísticas"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Ha ocurrido un error al intentar obtener los datos. Por favor, intenta nuevamente."}),e.jsxs(h,{onClick:()=>{p(),N()},children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Reintentar"]})]})})})}):e.jsx(x,{icon:m,title:"Evaluaciones",subtitle:"Gestión centralizada del sistema de evaluaciones",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs(h,{onClick:()=>{p(),N()},children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Actualizar datos"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs(r,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(l,{className:"text-sm font-medium",children:"Total Evaluaciones"})}),e.jsxs(t,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.totalEvaluations||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(le,{className:"h-3 w-3 inline mr-1"}),"Promedio: ",a.averageOverallRating||"0.0"]})]})]}),e.jsxs(r,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(l,{className:"text-sm font-medium",children:"Parques"})}),e.jsxs(t,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((b=a.parks)==null?void 0:b.total)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Promedio: ",((w=(f=a.parks)==null?void 0:f.averageRating)==null?void 0:w.toFixed(1))||"0.0"]})]})]}),e.jsxs(r,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(l,{className:"text-sm font-medium",children:"Instructores"})}),e.jsxs(t,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((y=a.instructors)==null?void 0:y.total)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Promedio: ",((E=(C=a.instructors)==null?void 0:C.averageRating)==null?void 0:E.toFixed(1))||"0.0"]})]})]}),e.jsxs(r,{children:[e.jsx(c,{className:"pb-2",children:e.jsx(l,{className:"text-sm font-medium",children:"Voluntarios"})}),e.jsxs(t,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((k=a.volunteers)==null?void 0:k.total)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Promedio: ",((R=(T=a.volunteers)==null?void 0:T.averageRating)==null?void 0:R.toFixed(1))||"0.0"]})]})]})]}),e.jsxs(r,{className:"mb-6",children:[e.jsxs(c,{children:[e.jsx(l,{children:"Módulos de Evaluación"}),e.jsx(G,{children:"Accede a los diferentes tipos de evaluaciones disponibles en el sistema"})]}),e.jsx(t,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(r,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>n("parques"),children:e.jsx(t,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(V,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Parques"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[((L=a.parks)==null?void 0:L.total)||0," evaluaciones"]})]})]})})}),e.jsx(r,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>n("instructores"),children:e.jsx(t,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx($,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Instructores"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[((H=a.instructors)==null?void 0:H.total)||0," evaluaciones"]})]})]})})}),e.jsx(r,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>n("voluntarios"),children:e.jsx(t,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(K,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Voluntarios"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[((A=a.volunteers)==null?void 0:A.total)||0," evaluaciones"]})]})]})})}),e.jsx(r,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>n("actividades"),children:e.jsx(t,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(u,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Actividades"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[((P=a.activities)==null?void 0:P.total)||0," evaluaciones"]})]})]})})}),e.jsx(r,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>n("concesionarios"),children:e.jsx(t,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(O,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Concesionarios"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[((q=a.concessionaires)==null?void 0:q.total)||0," evaluaciones"]})]})]})})}),e.jsx(r,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>n("eventos"),children:e.jsx(t,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(u,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Eventos"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[((M=a.events)==null?void 0:M.total)||0," evaluaciones"]})]})]})})})]})})]}),e.jsxs(r,{children:[e.jsxs(c,{children:[e.jsx(l,{children:"Evaluaciones Recientes"}),e.jsx(G,{children:"Últimas evaluaciones registradas en el sistema"})]}),e.jsxs(t,{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Buscar evaluaciones...",value:o,onChange:s=>U(s.target.value),className:"pl-8"})]})}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(xe,{children:[e.jsx(me,{children:e.jsxs(j,{children:[e.jsx(d,{children:"Tipo"}),e.jsx(d,{children:"Entidad"}),e.jsx(d,{children:"Evaluador"}),e.jsx(d,{children:"Calificación"}),e.jsx(d,{children:"Fecha"}),e.jsx(d,{children:"Acciones"})]})}),e.jsx(he,{children:g.length===0?e.jsx(j,{children:e.jsx(i,{colSpan:6,className:"text-center py-4",children:"No hay evaluaciones disponibles"})}):g.map(s=>e.jsxs(j,{children:[e.jsx(i,{children:e.jsxs(J,{className:re(s.type),children:[ae(s.type),e.jsx("span",{className:"ml-1",children:te(s.type)})]})}),e.jsx(i,{className:"font-medium",children:s.entityName||"Nombre no disponible"}),e.jsx(i,{children:s.evaluatorName||"Evaluador no disponible"}),e.jsx(i,{children:e.jsxs(J,{variant:s.overallRating>=4?"default":s.overallRating>=3?"secondary":"destructive",children:[s.overallRating,"/5"]})}),e.jsx(i,{children:se(s.createdAt)}),e.jsx(i,{children:e.jsx(h,{variant:"outline",size:"sm",onClick:()=>n(s.type==="park"?"parques":s.type==="instructor"?"instructores":s.type==="volunteer"?"voluntarios":s.type==="concessionaire"?"concesionarios":"eventos"),children:e.jsx(ue,{className:"h-4 w-4"})})})]},`${s.type}-${s.id}`))})]})})]})]})]})})}export{ve as default};
